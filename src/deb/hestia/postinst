#!/bin/bash

# Define global functions, upgrade functions, and necessary variables
source $HESTIA/func/main.sh
source $HESTIA/func/upgrade.sh

# Initialize backup directories
upgrade_init_backup

# Set up console display and welcome message
clear
upgrade_welcome_message

# Execute version-specific upgrade scripts
upgrade_start_routine

# Upgrade phpMyAdmin if applicable
upgrade_phpmyadmin

# Perform account and domain rebuild to ensure configuration files are correct
upgrade_rebuild_users

# Restart necessary services for changes to take full effect
upgrade_restart_services

# Add upgrade notification to admin user's panel and display completion message
upgrade_message_complete

exit 0
